<h2>Society Category Management</h2>

<br/>
<p-button label="Create New Society Category" (onClick)="showDialogCreate()"></p-button>
<br/>
<br/>

<div *ngIf="resultSuccess == true" style="color:blue;">
    {{message}}
</div>

<div *ngIf="resultError == true" style="color:red;">
    {{message}}
</div>

<p-table [value]="societyCategories">
    <ng-template pTemplate="header">
        <tr>					
            <th>Society Category</th>
            <th>Action</th>			
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-category>
        <tr>
            <td>{{category.societyCategoryName}}</td>
            <td>
                <p-button label="Update" icon="pi pi-refresh" (onClick)="showDialogUpdate(category)"></p-button>
                &nbsp;
                <button pButton type="button" label="Delete" class="p-button-danger" icon="pi pi-trash" (click)="showDialogDelete(category)"></button>
            </td>					
        </tr>
    </ng-template>
</p-table>

<p-dialog *ngIf="displayCreate" header="Create Society Category" [(visible)]="displayCreate" [style]="{width: '50vw'}">
    <form #createSocietyCategoryForm="ngForm" (ngSubmit)="create(createSocietyCategoryForm)">
        <table >
            <tr>
                <td width="20%" style="font-weight: bold;">Society Category Name</td>
                <td><input id="name" name="name" #name="ngModel" type="text" placeholder="Sports" [(ngModel)]="newCategory.societyCategoryName" required="true" /></td>
                <td>
                    <div *ngIf="name.invalid && (name.dirty || name.touched || displayCreate)" class="errorText">
                        <div *ngIf="name.errors?.['required']">
                            Society Category is required.
                        </div>
                    </div>
                </td>
            </tr>
            <tr>
                <input type="submit" value="Create" />
            </tr>
        </table>
    </form>
</p-dialog>

<p-dialog *ngIf="displayUpdate" header="Update Society Category" [(visible)]="displayUpdate" [style]="{width: '50vw'}">
    <form #updateSocietyCategoryForm="ngForm" (ngSubmit)="update(updateSocietyCategoryForm)">
        <div>New Society Category Name</div>
        <br/>
        <input id="name" name="name" #name="ngModel" type="text" placeholder="Sports" [(ngModel)]="categoryToView.societyCategoryName" required="true" />
        <div *ngIf="name.invalid && (name.dirty || name.touched || displayUpdate)" class="errorText">
            <div *ngIf="name.errors?.['required']">
                Society Category Name is required.
            </div>
        </div>
        &nbsp;
        <input type="submit" value="Update" />
    </form>
</p-dialog>

<p-dialog *ngIf="displayDelete" header="Delete Society Category" [(visible)]="displayDelete" [style]="{width: '50vw'}">
    <div>Are you sure you want to delete {{categoryToView.societyCategoryName}}?</div>
    <br/>
    <p-button label="Yes" (onClick)="delete()"></p-button>
    &nbsp;
    <p-button label="No"></p-button>
</p-dialog>